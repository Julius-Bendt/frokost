---
import MealItem from "./MealItem.astro";
const response = await fetch(
  "https://mad-server.orangeflower-a49b6a1f.swedencentral.azurecontainerapps.io/items"
);
const foodData = await response.json();
---

<div class="grid grid-cols-5 gap-4 justify-around mt-2">
  {foodData.map((food) => <MealItem food={food} />)}
</div>

<script>
    import {days} from  "../scripts/Weekdays.js";

    setDayAsActive();

    function setDayAsActive()
    {
        const day = new Date().getDay();

        if([0,6].includes(day)) return;

        const removeClasses = [
            "hover:bg-slate-700",
            "bg-slate-800"
        ];
        const addClasses = [
            "bg-slate-600",
        ];
        const activeDay = document.getElementById(days[day]);
        
        removeClasses.forEach(removeClass => {
            activeDay.classList.remove(removeClass);
        });

        addClasses.forEach(addClass => {
            activeDay.classList.add(addClass);
        });

    }
</script>